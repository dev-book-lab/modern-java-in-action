# Chapter 04 ìŠ¤íŠ¸ë¦¼ Q&A ì„¸ì…˜ ğŸ’¬

> ìŠ¤íŠ¸ë¦¼ í•™ìŠµ ì¤‘ ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ê³¼ ì‹¬í™” ì§ˆë¬¸ì— ëŒ€í•œ ë‹µë³€ ëª¨ìŒ

---

## ğŸ“‘ ëª©ì°¨

### ê¸°ë³¸ ê°œë…
1. [ìŠ¤íŠ¸ë¦¼ê³¼ ì»¬ë ‰ì…˜ì˜ ê°€ì¥ í° ì°¨ì´ëŠ”?](#q1-ìŠ¤íŠ¸ë¦¼ê³¼-ì»¬ë ‰ì…˜ì˜-ê°€ì¥-í°-ì°¨ì´ëŠ”)
2. [ìŠ¤íŠ¸ë¦¼ì€ ì™œ ë‹¨ í•œ ë²ˆë§Œ ì†Œë¹„í•  ìˆ˜ ìˆë‚˜ìš”?](#q2-ìŠ¤íŠ¸ë¦¼ì€-ì™œ-ë‹¨-í•œ-ë²ˆë§Œ-ì†Œë¹„í• -ìˆ˜-ìˆë‚˜ìš”)
3. [ìŠ¤íŠ¸ë¦¼ì„ ì–¸ì œ ì‚¬ìš©í•´ì•¼ í•˜ë‚˜ìš”?](#q3-ìŠ¤íŠ¸ë¦¼ì„-ì–¸ì œ-ì‚¬ìš©í•´ì•¼-í•˜ë‚˜ìš”)

### ì—°ì‚° ê´€ë ¨
4. [ì¤‘ê°„ ì—°ì‚°ê³¼ ìµœì¢… ì—°ì‚°ì„ ì–´ë–»ê²Œ êµ¬ë¶„í•˜ë‚˜ìš”?](#q4-ì¤‘ê°„-ì—°ì‚°ê³¼-ìµœì¢…-ì—°ì‚°ì„-ì–´ë–»ê²Œ-êµ¬ë¶„í•˜ë‚˜ìš”)
5. [peek()ê³¼ forEach()ì˜ ì°¨ì´ëŠ”?](#q5-peekê³¼-foreachì˜-ì°¨ì´ëŠ”)
6. [map()ê³¼ flatMap()ì˜ ì°¨ì´ëŠ”?](#q6-mapê³¼-flatmapì˜-ì°¨ì´ëŠ”)

### ì„±ëŠ¥ ê´€ë ¨
7. [ê²Œìœ¼ë¥¸ ì‹¤í–‰ì´ ì™œ ë¹ ë¥¸ê°€ìš”?](#q7-ê²Œìœ¼ë¥¸-ì‹¤í–‰ì´-ì™œ-ë¹ ë¥¸ê°€ìš”)
8. [ì‡¼íŠ¸ì„œí‚·ì€ ì–¼ë§ˆë‚˜ ë¹ ë¥¸ê°€ìš”?](#q8-ì‡¼íŠ¸ì„œí‚·ì€-ì–¼ë§ˆë‚˜-ë¹ ë¥¸ê°€ìš”)
9. [ë³‘ë ¬ ìŠ¤íŠ¸ë¦¼ì€ í•­ìƒ ë¹ ë¥¸ê°€ìš”?](#q9-ë³‘ë ¬-ìŠ¤íŠ¸ë¦¼ì€-í•­ìƒ-ë¹ ë¥¸ê°€ìš”)

### ì‹¤ì „ í™œìš©
10. [ìŠ¤íŠ¸ë¦¼ì—ì„œ ì¸ë±ìŠ¤ë¥¼ ì–´ë–»ê²Œ ì‚¬ìš©í•˜ë‚˜ìš”?](#q10-ìŠ¤íŠ¸ë¦¼ì—ì„œ-ì¸ë±ìŠ¤ë¥¼-ì–´ë–»ê²Œ-ì‚¬ìš©í•˜ë‚˜ìš”)
11. [ìŠ¤íŠ¸ë¦¼ì„ Listë¡œ ë³€í™˜í•˜ëŠ” ë°©ë²•ì€?](#q11-ìŠ¤íŠ¸ë¦¼ì„-listë¡œ-ë³€í™˜í•˜ëŠ”-ë°©ë²•ì€)
12. [nullì„ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•ì€?](#q12-nullì„-ì•ˆì „í•˜ê²Œ-ì²˜ë¦¬í•˜ëŠ”-ë°©ë²•ì€)

### ê³ ê¸‰ ì£¼ì œ
13. [ë¬´í•œ ìŠ¤íŠ¸ë¦¼ì€ ì–´ë–»ê²Œ ë§Œë“œë‚˜ìš”?](#q13-ë¬´í•œ-ìŠ¤íŠ¸ë¦¼ì€-ì–´ë–»ê²Œ-ë§Œë“œë‚˜ìš”)
14. [ìŠ¤íŠ¸ë¦¼ì€ ì–´ë–»ê²Œ ìµœì í™”ë˜ë‚˜ìš”?](#q14-ìŠ¤íŠ¸ë¦¼ì€-ì–´ë–»ê²Œ-ìµœì í™”ë˜ë‚˜ìš”)
15. [ìŠ¤íŠ¸ë¦¼ì˜ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì€?](#q15-ìŠ¤íŠ¸ë¦¼ì˜-ë©”ëª¨ë¦¬-ì‚¬ìš©ëŸ‰ì€)

### ì‹¤ìˆ˜ ë°©ì§€
16. [ìì£¼ í•˜ëŠ” ì‹¤ìˆ˜ëŠ”?](#q16-ìì£¼-í•˜ëŠ”-ì‹¤ìˆ˜ëŠ”)
17. [ë””ë²„ê¹…ì€ ì–´ë–»ê²Œ í•˜ë‚˜ìš”?](#q17-ë””ë²„ê¹…ì€-ì–´ë–»ê²Œ-í•˜ë‚˜ìš”)
18. [ì„±ëŠ¥ ë¬¸ì œëŠ” ì–´ë–»ê²Œ ì°¾ë‚˜ìš”?](#q18-ì„±ëŠ¥-ë¬¸ì œëŠ”-ì–´ë–»ê²Œ-ì°¾ë‚˜ìš”)

### ì‹¬í™” ì§ˆë¬¸
19. [ìŠ¤íŠ¸ë¦¼ì˜ ë‚´ë¶€ êµ¬í˜„ì€?](#q19-ìŠ¤íŠ¸ë¦¼ì˜-ë‚´ë¶€-êµ¬í˜„ì€)
20. [í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ê³¼ì˜ ê´€ê³„ëŠ”?](#q20-í•¨ìˆ˜í˜•-í”„ë¡œê·¸ë˜ë°ê³¼ì˜-ê´€ê³„ëŠ”)

---

## ê¸°ë³¸ ê°œë…

### Q1. ìŠ¤íŠ¸ë¦¼ê³¼ ì»¬ë ‰ì…˜ì˜ ê°€ì¥ í° ì°¨ì´ëŠ”?

**A:** ë°ì´í„°ë¥¼ **ì–¸ì œ ê³„ì‚°í•˜ëŠëƒ**ì…ë‹ˆë‹¤.

**ì»¬ë ‰ì…˜ (Eager - ì¦‰ì‹œ ê³„ì‚°):**
```java
List<Integer> numbers = Arrays.asList(1, 2, 3, 4, 5);
// ì´ë¯¸ ëª¨ë“  ê°’ì´ ë©”ëª¨ë¦¬ì— ì¡´ì¬
```

**ìŠ¤íŠ¸ë¦¼ (Lazy - í•„ìš”í•  ë•Œ ê³„ì‚°):**
```java
Stream<Integer> stream = numbers.stream()
    .filter(n -> n > 2)    // ì•„ì§ ì‹¤í–‰ ì•ˆ ë¨!
    .map(n -> n * 2);      // ì•„ì§ ì‹¤í–‰ ì•ˆ ë¨!

stream.forEach(System.out::println);  // ì´ì œ ì‹¤í–‰!
```

**ë¹„ìœ :**
- ì»¬ë ‰ì…˜ = DVD (ëª¨ë“  ì¥ë©´ì´ ì €ì¥ë¨)
- ìŠ¤íŠ¸ë¦¼ = Netflix (ë³´ëŠ” ì¥ë©´ë§Œ ì „ì†¡)

---

### Q2. ìŠ¤íŠ¸ë¦¼ì€ ì™œ ë‹¨ í•œ ë²ˆë§Œ ì†Œë¹„í•  ìˆ˜ ìˆë‚˜ìš”?

**A:** ìŠ¤íŠ¸ë¦¼ì€ **ë°ì´í„°ì˜ íë¦„**ì„ ë‚˜íƒ€ë‚´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

**ê°œë…:**
```java
Stream<String> stream = list.stream();
stream.forEach(System.out::println);  // âœ… OK
stream.forEach(System.out::println);  // âŒ IllegalStateException!
```

**ì´ìœ :**
1. **íš¨ìœ¨ì„±**: ë°ì´í„°ë¥¼ í•œ ë²ˆë§Œ ìˆœíšŒí•˜ì—¬ ì²˜ë¦¬
2. **ì„¤ê³„ ì² í•™**: ë°ì´í„°ì˜ "íë¦„"ì„ ë‚˜íƒ€ëƒ„ (ë¬¼ì´ íë¥´ë©´ ë‹¤ì‹œ ì•ˆ ì˜´)
3. **ìµœì í™”**: í•œ ë²ˆì˜ íŒ¨ìŠ¤ë¡œ ëª¨ë“  ì—°ì‚° ìˆ˜í–‰

**í•´ê²°ì±…:**
```java
// ë§¤ë²ˆ ìƒˆë¡œìš´ ìŠ¤íŠ¸ë¦¼ ìƒì„±
list.stream().forEach(System.out::println);
list.stream().forEach(System.out::println);  // âœ… OK

// ë˜ëŠ” Supplier ì‚¬ìš©
Supplier<Stream<String>> streamSupplier = () -> list.stream();
streamSupplier.get().forEach(System.out::println);
streamSupplier.get().forEach(System.out::println);
```

---

### Q3. ìŠ¤íŠ¸ë¦¼ì„ ì–¸ì œ ì‚¬ìš©í•´ì•¼ í•˜ë‚˜ìš”?

**A:** ë‹¤ìŒ ê²½ìš°ì— ìŠ¤íŠ¸ë¦¼ì„ ì‚¬ìš©í•˜ì„¸ìš”:

**âœ… ì‚¬ìš©í•´ì•¼ í•  ë•Œ:**
```java
// 1. ë³µì¡í•œ ë°ì´í„° ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸
List<String> result = users.stream()
    .filter(u -> u.isActive())
    .filter(u -> u.getAge() > 18)
    .map(User::getName)
    .sorted()
    .collect(toList());

// 2. ë³‘ë ¬ ì²˜ë¦¬
long count = bigList.parallelStream()
    .filter(condition)
    .count();

// 3. ëŒ€ìš©ëŸ‰ ë°ì´í„°
Files.lines(path)
    .filter(line -> line.contains("ERROR"))
    .forEach(System.out::println);

// 4. í•¨ìˆ˜í˜• ìŠ¤íƒ€ì¼ ì„ í˜¸
Optional<User> found = users.stream()
    .filter(u -> u.getId() == targetId)
    .findFirst();
```

**âŒ ì‚¬ìš©í•˜ì§€ ë§ì•„ì•¼ í•  ë•Œ:**
```java
// 1. ê°„ë‹¨í•œ ë°˜ë³µ (3ì¤„ ì´í•˜)
for (String name : names) {
    System.out.println(name);  // ì´ê²Œ ë” ëª…í™•
}

// 2. ì¸ë±ìŠ¤ê°€ í•„ìš”í•œ ê²½ìš°
for (int i = 0; i < list.size(); i++) {
    process(list.get(i), i);  // ì¸ë±ìŠ¤ í•„ìš”
}

// 3. ë°˜ë³µ ì¤‘ break/continue í•„ìš”
for (Item item : items) {
    if (item.isTarget()) break;  // ìŠ¤íŠ¸ë¦¼ì—ì„œëŠ” ë³µì¡
}
```

---

## ì—°ì‚° ê´€ë ¨

### Q4. ì¤‘ê°„ ì—°ì‚°ê³¼ ìµœì¢… ì—°ì‚°ì„ ì–´ë–»ê²Œ êµ¬ë¶„í•˜ë‚˜ìš”?

**A:** **ë°˜í™˜ íƒ€ì…**ìœ¼ë¡œ êµ¬ë¶„í•©ë‹ˆë‹¤.

**ì¤‘ê°„ ì—°ì‚° - Streamì„ ë°˜í™˜:**
```java
Stream<T> filter(Predicate<T> p)     // Stream<T> ë°˜í™˜
Stream<T> map(Function<T, R> f)      // Stream<R> ë°˜í™˜
Stream<T> sorted()                    // Stream<T> ë°˜í™˜
Stream<T> distinct()                  // Stream<T> ë°˜í™˜
```

**ìµœì¢… ì—°ì‚° - êµ¬ì²´ì ì¸ íƒ€ì… ë°˜í™˜:**
```java
void forEach(Consumer<T> c)           // void ë°˜í™˜
List<T> collect(Collector<T, ?, R>)   // List<T> ë°˜í™˜
long count()                          // long ë°˜í™˜
Optional<T> findFirst()               // Optional<T> ë°˜í™˜
```

**ì‹¤ì „ ì˜ˆì œ:**
```java
list.stream()                    // Stream<String>
    .filter(s -> s.length() > 3) // Stream<String> (ì¤‘ê°„)
    .map(String::toUpperCase)    // Stream<String> (ì¤‘ê°„)
    .sorted()                    // Stream<String> (ì¤‘ê°„)
    .collect(toList());          // List<String> (ìµœì¢…)
```

---

### Q5. peek()ê³¼ forEach()ì˜ ì°¨ì´ëŠ”?

**A:** `peek()`ì€ **ì¤‘ê°„ ì—°ì‚°**, `forEach()`ëŠ” **ìµœì¢… ì—°ì‚°**ì…ë‹ˆë‹¤.

**peek() - ë””ë²„ê¹…ìš© ì¤‘ê°„ ì—°ì‚°:**
```java
list.stream()
    .peek(x -> System.out.println("Before: " + x))
    .filter(x -> x > 10)
    .peek(x -> System.out.println("After: " + x))
    .collect(toList());  // ìµœì¢… ì—°ì‚° í•„ìš”!
```

**forEach() - ìµœì¢… ì—°ì‚°:**
```java
list.stream()
    .filter(x -> x > 10)
    .forEach(System.out::println);  // ìŠ¤íŠ¸ë¦¼ ë‹«í˜
```

**ì£¼ì˜ì‚¬í•­:**
```java
// âŒ ì˜ëª»ëœ ì‚¬ìš©
list.stream()
    .peek(System.out::println);  // ì‹¤í–‰ ì•ˆ ë¨! (ìµœì¢… ì—°ì‚° ì—†ìŒ)

// âœ… ì˜¬ë°”ë¥¸ ì‚¬ìš©
list.stream()
    .peek(System.out::println)
    .collect(toList());  // ìµœì¢… ì—°ì‚° ì¶”ê°€
```

---

### Q6. map()ê³¼ flatMap()ì˜ ì°¨ì´ëŠ”?

**A:** `map()`ì€ **1:1 ë³€í™˜**, `flatMap()`ì€ **1:N ë³€í™˜ í›„ í‰ë©´í™”**ì…ë‹ˆë‹¤.

**map() - ê° ìš”ì†Œë¥¼ ë³€í™˜:**
```java
List<String> words = Arrays.asList("Hello", "World");

words.stream()
     .map(String::toUpperCase)
     .collect(toList());
// ["HELLO", "WORLD"]

words.stream()
     .map(String::length)
     .collect(toList());
// [5, 5]
```

**flatMap() - ìŠ¤íŠ¸ë¦¼ì„ í‰ë©´í™”:**
```java
// ê° ë‹¨ì–´ë¥¼ ë¬¸ìë¡œ ë¶„ë¦¬
words.stream()
     .map(word -> word.split(""))        // Stream<String[]>
     .collect(toList());
// [["H","e","l","l","o"], ["W","o","r","l","d"]]  â† 2ì°¨ì›!

words.stream()
     .flatMap(word -> Arrays.stream(word.split("")))  // Stream<String>
     .distinct()
     .collect(toList());
// ["H", "e", "l", "o", "W", "r", "d"]  â† 1ì°¨ì›!
```

**ì‹œê°í™”:**
```
map:
["Hello", "World"]
   â†“ map(word -> word.split(""))
[["H","e","l","l","o"], ["W","o","r","l","d"]]  â† 2ì°¨ì› ë°°ì—´

flatMap:
["Hello", "World"]
   â†“ flatMap(word -> Arrays.stream(word.split("")))
["H", "e", "l", "o", "W", "r", "l", "d"]  â† í‰ë©´í™”ë¨!
```

---

## ì„±ëŠ¥ ê´€ë ¨

### Q7. ê²Œìœ¼ë¥¸ ì‹¤í–‰ì´ ì™œ ë¹ ë¥¸ê°€ìš”?

**A:** **í•„ìš”í•œ ë§Œí¼ë§Œ ê³„ì‚°**í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

**ì˜ˆì œ: ì²« ë²ˆì§¸ ì§ìˆ˜ ì°¾ê¸°**

**ì¦‰ì‹œ ì‹¤í–‰ (ê°€ì •):**
```java
// 1ë‹¨ê³„: ëª¨ë“  ì§ìˆ˜ ì°¾ê¸° (100ë§Œ ë²ˆ)
List<Integer> allEven = new ArrayList<>();
for (int i = 0; i < 1_000_000; i++) {
    if (i % 2 == 0) allEven.add(i);
}

// 2ë‹¨ê³„: ì²« ë²ˆì§¸ ì„ íƒ
Integer first = allEven.get(0);

// ì²˜ë¦¬: 100ë§Œ ë²ˆ!
```

**ê²Œìœ¼ë¥¸ ì‹¤í–‰ (ìŠ¤íŠ¸ë¦¼):**
```java
Optional<Integer> first = Stream.iterate(0, n -> n + 1)
    .filter(n -> n % 2 == 0)
    .findFirst();

// ì²˜ë¦¬: 1ë²ˆ! (0 ê²€ì‚¬ â†’ ì§ìˆ˜ â†’ ë°˜í™˜)
```

**ì´ì :**
1. **ë¶ˆí•„ìš”í•œ ì—°ì‚° íšŒí”¼**: í•„ìš”í•œ ê²ƒë§Œ ê³„ì‚°
2. **ë¬´í•œ ìŠ¤íŠ¸ë¦¼ ê°€ëŠ¥**: ë¬´í•œì´ì–´ë„ ì²˜ë¦¬ ê°€ëŠ¥
3. **ë©”ëª¨ë¦¬ íš¨ìœ¨**: ì¤‘ê°„ ì»¬ë ‰ì…˜ ìƒì„± ì•ˆ í•¨

---

### Q8. ì‡¼íŠ¸ì„œí‚·ì€ ì–¼ë§ˆë‚˜ ë¹ ë¥¸ê°€ìš”?

**A:** ê²½ìš°ì— ë”°ë¼ **ìˆ˜ì²œ~ìˆ˜ë°±ë§Œ ë°°** ë¹ ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ì‹¤í—˜: 100ë§Œ ê°œ ì¤‘ ì²« ë²ˆì§¸ ì°¾ê¸°**

```java
List<Integer> numbers = IntStream.range(0, 1_000_000)
    .boxed()
    .collect(toList());

// ì‡¼íŠ¸ì„œí‚· ì—†ìŒ
long start1 = System.nanoTime();
List<Integer> all = numbers.stream()
    .filter(n -> n % 2 == 0)
    .collect(toList());
Integer first1 = all.get(0);
long time1 = System.nanoTime() - start1;
// ì‹œê°„: ~200ms (100ë§Œ ë²ˆ ê²€ì‚¬)

// ì‡¼íŠ¸ì„œí‚· ì‚¬ìš©
long start2 = System.nanoTime();
Optional<Integer> first2 = numbers.stream()
    .filter(n -> n % 2 == 0)
    .findFirst();
long time2 = System.nanoTime() - start2;
// ì‹œê°„: ~0.001ms (1ë²ˆ ê²€ì‚¬)

// ì†ë„ ì°¨ì´: 200,000ë°°!
```

**ì‡¼íŠ¸ì„œí‚· ì—°ì‚°:**
- `anyMatch()`, `allMatch()`, `noneMatch()`
- `findFirst()`, `findAny()`
- `limit(n)`

---

### Q9. ë³‘ë ¬ ìŠ¤íŠ¸ë¦¼ì€ í•­ìƒ ë¹ ë¥¸ê°€ìš”?

**A:** **ì•„ë‹ˆì˜¤!** ë‹¤ìŒ ê²½ìš°ì—ë§Œ ë¹ ë¦…ë‹ˆë‹¤.

**âœ… ë³‘ë ¬ ìŠ¤íŠ¸ë¦¼ì´ ë¹ ë¥¸ ê²½ìš°:**
```java
// 1. ëŒ€ìš©ëŸ‰ ë°ì´í„° (ìˆ˜ë§Œ~ìˆ˜ë°±ë§Œ ê°œ)
bigList.parallelStream()
    .filter(complexCondition)
    .collect(toList());

// 2. CPU ì§‘ì•½ì  ì‘ì—…
numbers.parallelStream()
    .map(n -> expensiveComputation(n))
    .collect(toList());

// 3. ë¶„í•  ê°€ëŠ¥í•œ ì†ŒìŠ¤ (ArrayList, ë°°ì—´ ë“±)
array.parallelStream()
    .filter(condition)
    .collect(toList());
```

**âŒ ë³‘ë ¬ ìŠ¤íŠ¸ë¦¼ì´ ëŠë¦° ê²½ìš°:**
```java
// 1. ì†ŒëŸ‰ ë°ì´í„° (ìˆ˜ë°±~ìˆ˜ì²œ ê°œ)
smallList.parallelStream()  // ì˜¤ë²„í—¤ë“œ > ì´ë“
    .filter(condition)
    .collect(toList());

// 2. I/O ì‘ì—…
files.parallelStream()
    .map(f -> readFile(f))  // ë³‘ëª©ì€ I/O, CPU ì•„ë‹˜
    .collect(toList());

// 3. ë¶„í•  ì–´ë ¤ìš´ ì†ŒìŠ¤ (LinkedList ë“±)
linkedList.parallelStream()  // ë¶„í•  ë¹„ìš©ì´ í¼
    .filter(condition)
    .collect(toList());

// 4. ìˆœì„œê°€ ì¤‘ìš”í•œ ê²½ìš°
list.parallelStream()
    .sorted()  // ë³‘ë ¬ ì •ë ¬ í›„ í•©ì¹˜ê¸° í•„ìš”
    .collect(toList());
```

**ë²¤ì¹˜ë§ˆí¬ ì˜ˆì œ:**
```java
// ì†ŒëŸ‰ ë°ì´í„° (1,000ê°œ)
List<Integer> small = IntStream.range(0, 1_000).boxed().collect(toList());

// ìˆœì°¨
small.stream().filter(n -> n % 2 == 0).count();
// ì‹œê°„: 1ms

// ë³‘ë ¬
small.parallelStream().filter(n -> n % 2 == 0).count();
// ì‹œê°„: 5ms (ì˜¤íˆë ¤ ëŠë¦¼!)

// ëŒ€ëŸ‰ ë°ì´í„° (1,000,000ê°œ)
List<Integer> large = IntStream.range(0, 1_000_000).boxed().collect(toList());

// ìˆœì°¨
large.stream().filter(n -> isPrime(n)).count();
// ì‹œê°„: 1000ms

// ë³‘ë ¬
large.parallelStream().filter(n -> isPrime(n)).count();
// ì‹œê°„: 250ms (4ë°° ë¹ ë¦„!)
```

---

## ì‹¤ì „ í™œìš©

### Q10. ìŠ¤íŠ¸ë¦¼ì—ì„œ ì¸ë±ìŠ¤ë¥¼ ì–´ë–»ê²Œ ì‚¬ìš©í•˜ë‚˜ìš”?

**A:** ì—¬ëŸ¬ ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤.

**ë°©ë²• 1: IntStream.range() ì‚¬ìš©**
```java
List<String> names = Arrays.asList("Alice", "Bob", "Charlie");

IntStream.range(0, names.size())
    .forEach(i -> System.out.println(i + ": " + names.get(i)));

// ì¶œë ¥:
// 0: Alice
// 1: Bob
// 2: Charlie
```

**ë°©ë²• 2: AtomicInteger ì‚¬ìš©**
```java
AtomicInteger index = new AtomicInteger();

names.stream()
    .forEach(name -> System.out.println(
        index.getAndIncrement() + ": " + name
    ));
```

**ë°©ë²• 3: ì¸ë±ìŠ¤ í¬í•¨ í´ë˜ìŠ¤ ë§Œë“¤ê¸°**
```java
class Indexed<T> {
    final int index;
    final T value;
    
    Indexed(int index, T value) {
        this.index = index;
        this.value = value;
    }
}

IntStream.range(0, names.size())
    .mapToObj(i -> new Indexed<>(i, names.get(i)))
    .filter(indexed -> indexed.value.length() > 3)
    .forEach(indexed -> 
        System.out.println(indexed.index + ": " + indexed.value)
    );
```

**ì£¼ì˜:** ì¸ë±ìŠ¤ê°€ ìì£¼ í•„ìš”í•˜ë©´ for ë£¨í”„ê°€ ë” ë‚˜ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

### Q11. ìŠ¤íŠ¸ë¦¼ì„ Listë¡œ ë³€í™˜í•˜ëŠ” ë°©ë²•ì€?

**A:** `collect(Collectors.toList())`ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

**ê¸°ë³¸ ë°©ë²•:**
```java
List<String> result = stream.collect(Collectors.toList());

// ë˜ëŠ” static import
import static java.util.stream.Collectors.toList;

List<String> result = stream.collect(toList());
```

**íŠ¹ì • List êµ¬í˜„ì²´ë¡œ:**
```java
// ArrayListë¡œ
List<String> arrayList = stream.collect(
    Collectors.toCollection(ArrayList::new)
);

// LinkedListë¡œ
List<String> linkedList = stream.collect(
    Collectors.toCollection(LinkedList::new)
);
```

**ë¶ˆë³€ ë¦¬ìŠ¤íŠ¸ë¡œ (Java 10+):**
```java
List<String> immutable = stream.collect(
    Collectors.toUnmodifiableList()
);
```

**ë°°ì—´ë¡œ:**
```java
String[] array = stream.toArray(String[]::new);
```

---

### Q12. nullì„ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•ì€?

**A:** `Objects.nonNull()` ë˜ëŠ” `Optional`ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

**ë°©ë²• 1: null í•„í„°ë§**
```java
List<String> names = Arrays.asList("Alice", null, "Bob", null, "Charlie");

List<String> nonNull = names.stream()
    .filter(Objects::nonNull)
    .collect(toList());
// ["Alice", "Bob", "Charlie"]
```

**ë°©ë²• 2: Optional í™œìš©**
```java
Optional<String> result = Optional.ofNullable(nullableValue)
    .map(String::toUpperCase)
    .filter(s -> s.length() > 3);
```

**ë°©ë²• 3: flatMap + Optional**
```java
List<String> names = Arrays.asList("Alice", null, "Bob");

List<String> processed = names.stream()
    .flatMap(name -> Optional.ofNullable(name).stream())
    .map(String::toUpperCase)
    .collect(toList());
```

**ì£¼ì˜ì‚¬í•­:**
```java
// âŒ NPE ìœ„í—˜
stream.map(s -> s.toUpperCase())  // sê°€ nullì´ë©´ NPE!

// âœ… ì•ˆì „
stream.filter(Objects::nonNull)
      .map(String::toUpperCase)
```

---

## ê³ ê¸‰ ì£¼ì œ

### Q13. ë¬´í•œ ìŠ¤íŠ¸ë¦¼ì€ ì–´ë–»ê²Œ ë§Œë“œë‚˜ìš”?

**A:** `Stream.iterate()` ë˜ëŠ” `Stream.generate()`ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

**iterate() - ìˆ˜ì—´ ìƒì„±:**
```java
// 0, 1, 2, 3, 4, ...
Stream.iterate(0, n -> n + 1)
    .limit(10)
    .forEach(System.out::println);

// í”¼ë³´ë‚˜ì¹˜ ìˆ˜ì—´
Stream.iterate(new int[]{0, 1}, f -> new int[]{f[1], f[0] + f[1]})
    .limit(10)
    .map(f -> f[0])
    .forEach(System.out::println);
// 0, 1, 1, 2, 3, 5, 8, 13, 21, 34
```

**generate() - ì„ì˜ ê°’ ìƒì„±:**
```java
// ëœë¤ ìˆ«ì
Stream.generate(Math::random)
    .limit(5)
    .forEach(System.out::println);

// ìƒìˆ˜
Stream.generate(() -> "Hello")
    .limit(3)
    .forEach(System.out::println);
// Hello
// Hello
// Hello
```

**ì£¼ì˜:** ë¬´í•œ ìŠ¤íŠ¸ë¦¼ì€ **ë°˜ë“œì‹œ limit()** ë˜ëŠ” **ì‡¼íŠ¸ì„œí‚· ì—°ì‚°** í•„ìš”!

---

### Q14. ìŠ¤íŠ¸ë¦¼ì€ ì–´ë–»ê²Œ ìµœì í™”ë˜ë‚˜ìš”?

**A:** 3ê°€ì§€ ì£¼ìš” ìµœì í™” ê¸°ë²•ì´ ìˆìŠµë‹ˆë‹¤.

**1. ê²Œìœ¼ë¥¸ ì‹¤í–‰ (Lazy Evaluation)**
```java
stream
    .filter(...)   // ì €ì¥ë§Œ í•¨
    .map(...)      // ì €ì¥ë§Œ í•¨
    .collect(...); // ì´ì œ ì‹¤í–‰!
```

**2. ì‡¼íŠ¸ì„œí‚· (Short-circuit)**
```java
stream
    .filter(...)
    .findFirst();  // ì°¾ìœ¼ë©´ ì¦‰ì‹œ ì¤‘ë‹¨!
```

**3. ë£¨í”„ í“¨ì „ (Loop Fusion)**
```java
// ì—¬ëŸ¬ ì—°ì‚°ì„ í•˜ë‚˜ì˜ íŒ¨ìŠ¤ë¡œ í•©ì¹¨
stream
    .filter(...)  // \
    .map(...)     //  } í•œ ë²ˆì˜ ë£¨í”„!
    .filter(...)  // /
```

**ë‚´ë¶€ ìµœì í™” ì˜ˆì‹œ:**
```java
// ê°œë°œì ì½”ë“œ
stream.filter(a).map(b).filter(c).collect(toList())

// ë‚´ë¶€ì ìœ¼ë¡œ ì‹¤í–‰ (ê°œë…ì )
for (element : source) {
    if (a(element)) {           // filter
        temp = b(element);       // map
        if (c(temp)) {           // filter
            result.add(temp);    // collect
        }
    }
}
```

---

### Q15. ìŠ¤íŠ¸ë¦¼ì˜ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì€?

**A:** **ë§¤ìš° ì ìŠµë‹ˆë‹¤!** ì¤‘ê°„ ì»¬ë ‰ì…˜ì„ ë§Œë“¤ì§€ ì•Šê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

**ì „í†µì  ë°©ì‹:**
```java
List<Integer> temp1 = new ArrayList<>();  // ë©”ëª¨ë¦¬ ì‚¬ìš©
for (int n : numbers) {
    if (n > 10) temp1.add(n);
}

List<Integer> temp2 = new ArrayList<>();  // ë©”ëª¨ë¦¬ ì‚¬ìš©
for (int n : temp1) {
    temp2.add(n * 2);
}

// ë©”ëª¨ë¦¬: ì›ë³¸ + temp1 + temp2 = 3ë°°
```

**ìŠ¤íŠ¸ë¦¼ ë°©ì‹:**
```java
List<Integer> result = numbers.stream()
    .filter(n -> n > 10)
    .map(n -> n * 2)
    .collect(toList());

// ë©”ëª¨ë¦¬: ì›ë³¸ + ê²°ê³¼ë§Œ = 2ë°°
// (ì¤‘ê°„ ì»¬ë ‰ì…˜ temp1, temp2 ì—†ìŒ!)
```

**ëŒ€ìš©ëŸ‰ íŒŒì¼ ì²˜ë¦¬:**
```java
// ì „í†µì  ë°©ì‹ - OOM ìœ„í—˜!
List<String> lines = Files.readAllLines(path);  // ì „ì²´ë¥¼ ë©”ëª¨ë¦¬ì—!

// ìŠ¤íŠ¸ë¦¼ ë°©ì‹ - ì•ˆì „
Files.lines(path)
    .filter(line -> line.contains("ERROR"))
    .forEach(System.out::println);
// í•œ ì¤„ì”©ë§Œ ë©”ëª¨ë¦¬ì—!
```

---

## ì‹¤ìˆ˜ ë°©ì§€

### Q16. ìì£¼ í•˜ëŠ” ì‹¤ìˆ˜ëŠ”?

**A:** ë‹¤ìŒ 4ê°€ì§€ ì‹¤ìˆ˜ê°€ ê°€ì¥ í”í•©ë‹ˆë‹¤.

**ì‹¤ìˆ˜ 1: ìŠ¤íŠ¸ë¦¼ ì¬ì‚¬ìš©**
```java
// âŒ ì—ëŸ¬!
Stream<String> stream = list.stream();
stream.forEach(System.out::println);
stream.forEach(System.out::println);  // IllegalStateException!

// âœ… ìˆ˜ì •
list.stream().forEach(System.out::println);
list.stream().forEach(System.out::println);
```

**ì‹¤ìˆ˜ 2: ìµœì¢… ì—°ì‚° ëˆ„ë½**
```java
// âŒ ì‹¤í–‰ ì•ˆ ë¨
list.stream()
    .filter(s -> s.length() > 3)
    .map(String::toUpperCase);  // ìµœì¢… ì—°ì‚° ì—†ìŒ!

// âœ… ìˆ˜ì •
list.stream()
    .filter(s -> s.length() > 3)
    .map(String::toUpperCase)
    .collect(toList());  // ìµœì¢… ì—°ì‚° ì¶”ê°€
```

**ì‹¤ìˆ˜ 3: peekì„ ìµœì¢… ì—°ì‚°ìœ¼ë¡œ ì˜¤í•´**
```java
// âŒ ì‹¤í–‰ ì•ˆ ë¨
list.stream()
    .peek(System.out::println);  // peekì€ ì¤‘ê°„ ì—°ì‚°!

// âœ… ìˆ˜ì •
list.stream()
    .peek(System.out::println)
    .collect(toList());  // ìµœì¢… ì—°ì‚° í•„ìš”
```

**ì‹¤ìˆ˜ 4: ì™¸ë¶€ ìƒíƒœ ë³€ê²½**
```java
// âŒ ìœ„í—˜! (ìŠ¤ë ˆë“œ ì•ˆì „í•˜ì§€ ì•ŠìŒ)
List<String> result = new ArrayList<>();
stream.forEach(result::add);  // ë³‘ë ¬ ìŠ¤íŠ¸ë¦¼ì—ì„œ ë¬¸ì œ!

// âœ… ìˆ˜ì •
List<String> result = stream.collect(toList());
```

---

### Q17. ë””ë²„ê¹…ì€ ì–´ë–»ê²Œ í•˜ë‚˜ìš”?

**A:** `peek()`ì„ í™œìš©í•©ë‹ˆë‹¤.

**ë°©ë²• 1: peek()ìœ¼ë¡œ ì¤‘ê°„ í™•ì¸**
```java
List<String> result = list.stream()
    .peek(s -> System.out.println("Original: " + s))
    .filter(s -> s.length() > 3)
    .peek(s -> System.out.println("  Filtered: " + s))
    .map(String::toUpperCase)
    .peek(s -> System.out.println("    Mapped: " + s))
    .collect(toList());
```

**ë°©ë²• 2: ì‹¤í–‰ ìˆœì„œ í™•ì¸**
```java
Stream.of("a", "bb", "ccc", "dddd")
    .peek(s -> System.out.println("1. ì†ŒìŠ¤: " + s))
    .filter(s -> s.length() > 2)
    .peek(s -> System.out.println("  2. í•„í„° í†µê³¼: " + s))
    .map(String::toUpperCase)
    .peek(s -> System.out.println("    3. ë³€í™˜ ì™„ë£Œ: " + s))
    .forEach(s -> System.out.println("      4. ìµœì¢…: " + s));

// ì¶œë ¥:
// 1. ì†ŒìŠ¤: a
// 1. ì†ŒìŠ¤: bb
// 1. ì†ŒìŠ¤: ccc
//   2. í•„í„° í†µê³¼: ccc
//     3. ë³€í™˜ ì™„ë£Œ: CCC
//       4. ìµœì¢…: CCC
// 1. ì†ŒìŠ¤: dddd
//   2. í•„í„° í†µê³¼: dddd
//     3. ë³€í™˜ ì™„ë£Œ: DDDD
//       4. ìµœì¢…: DDDD
```

**ë°©ë²• 3: IntelliJì˜ Stream Trace ì‚¬ìš©**
- IntelliJì—ì„œ ìŠ¤íŠ¸ë¦¼ ë””ë²„ê¹… ì‹œ "Trace Current Stream Chain" ê¸°ëŠ¥ í™œìš©

---

### Q18. ì„±ëŠ¥ ë¬¸ì œëŠ” ì–´ë–»ê²Œ ì°¾ë‚˜ìš”?

**A:** ë‹¤ìŒì„ í™•ì¸í•˜ì„¸ìš”.

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**

1. **ë¶ˆí•„ìš”í•œ ë°•ì‹±/ì–¸ë°•ì‹±?**
```java
// âŒ ëŠë¦¼
int sum = list.stream()
    .map(Integer::intValue)
    .reduce(0, Integer::sum);

// âœ… ë¹ ë¦„
int sum = list.stream()
    .mapToInt(Integer::intValue)
    .sum();
```

2. **ì‡¼íŠ¸ì„œí‚· ë¯¸í™œìš©?**
```java
// âŒ ëŠë¦¼
boolean exists = list.stream()
    .filter(condition)
    .collect(toList())
    .size() > 0;

// âœ… ë¹ ë¦„
boolean exists = list.stream()
    .anyMatch(condition);
```

3. **ìƒíƒœ ìˆëŠ” ì—°ì‚° ë‚¨ìš©?**
```java
// âŒ ëŠë¦¼ (ì—¬ëŸ¬ ì •ë ¬)
stream
    .sorted()
    .filter(...)
    .sorted()  // ë¶ˆí•„ìš”í•œ ì •ë ¬!

// âœ… ë¹ ë¦„
stream
    .filter(...)
    .sorted()  // í•œ ë²ˆë§Œ
```

4. **ë³‘ë ¬ ìŠ¤íŠ¸ë¦¼ ì˜¤ìš©?**
```java
// âŒ ì†ŒëŸ‰ ë°ì´í„°ì— ë³‘ë ¬
smallList.parallelStream()  // ì˜¤ë²„í—¤ë“œ > ì´ë“

// âœ… ëŒ€ëŸ‰ ë°ì´í„°ì— ë³‘ë ¬
largeList.parallelStream()
```

---

## ì‹¬í™” ì§ˆë¬¸

### Q19. ìŠ¤íŠ¸ë¦¼ì˜ ë‚´ë¶€ êµ¬í˜„ì€?

**A:** ì£¼ìš” êµ¬ì„± ìš”ì†ŒëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

**1. Pipeline êµ¬ì¡°**
```
Head (ì†ŒìŠ¤) â†’ Stage1 (ì¤‘ê°„) â†’ Stage2 (ì¤‘ê°„) â†’ Tail (ìµœì¢…)
```

**2. Spliterator**
- ìŠ¤íŠ¸ë¦¼ì˜ ìš”ì†Œ ìˆœíšŒ ë‹´ë‹¹
- ë³‘ë ¬ ì²˜ë¦¬ ì‹œ ë°ì´í„° ë¶„í• 

**3. Sink**
- ê° ì—°ì‚°ì˜ ì‹¤í–‰ ë‹´ë‹¹
- ì²´ì´ë‹ìœ¼ë¡œ ì—°ê²°ë¨

**ê°„ë‹¨í•œ ê°œë…ë„:**
```java
// ê°œë°œì ì½”ë“œ
stream.filter(a).map(b).collect(toList())

// ë‚´ë¶€ êµ¬ì¡° (ë‹¨ìˆœí™”)
class FilterStage {
    Predicate<T> predicate;
    Stage next;
    
    void process(T item) {
        if (predicate.test(item)) {
            next.process(item);
        }
    }
}

class MapStage {
    Function<T, R> mapper;
    Stage next;
    
    void process(T item) {
        R result = mapper.apply(item);
        next.process(result);
    }
}

class CollectStage {
    Collector collector;
    
    void process(T item) {
        collector.accumulate(item);
    }
}
```

---

### Q20. í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ê³¼ì˜ ê´€ê³„ëŠ”?

**A:** ìŠ¤íŠ¸ë¦¼ì€ Javaì˜ **í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë° ë„êµ¬**ì…ë‹ˆë‹¤.

**í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë° ì›ì¹™:**

1. **ë¶ˆë³€ì„± (Immutability)**
```java
// ì›ë³¸ì„ ë³€ê²½í•˜ì§€ ì•ŠìŒ
List<String> original = Arrays.asList("a", "b", "c");
List<String> upper = original.stream()
    .map(String::toUpperCase)
    .collect(toList());

System.out.println(original);  // [a, b, c] (ë³€ê²½ ì•ˆ ë¨!)
System.out.println(upper);     // [A, B, C]
```

2. **ìˆœìˆ˜ í•¨ìˆ˜ (Pure Functions)**
```java
// âœ… ìˆœìˆ˜ í•¨ìˆ˜ (ë¶€ì‘ìš© ì—†ìŒ)
stream.map(s -> s.toUpperCase())

// âŒ ë¹„ìˆœìˆ˜ í•¨ìˆ˜ (ì™¸ë¶€ ìƒíƒœ ë³€ê²½)
List<String> result = new ArrayList<>();
stream.forEach(s -> result.add(s))  // ë¶€ì‘ìš©!
```

3. **ì„ ì–¸í˜• í”„ë¡œê·¸ë˜ë°**
```java
// ëª…ë ¹í˜•: "ì–´ë–»ê²Œ(How)" í• ì§€ ëª…ì‹œ
List<String> result = new ArrayList<>();
for (String s : list) {
    if (s.length() > 3) {
        result.add(s.toUpperCase());
    }
}

// ì„ ì–¸í˜•: "ë¬´ì—‡ì„(What)" í• ì§€ ëª…ì‹œ
List<String> result = list.stream()
    .filter(s -> s.length() > 3)
    .map(String::toUpperCase)
    .collect(toList());
```

4. **ê³ ì°¨ í•¨ìˆ˜ (Higher-Order Functions)**
```java
// í•¨ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ë°›ìŒ
stream.filter(predicate)  // Predicateë¥¼ ë°›ìŒ
      .map(function)      // Functionì„ ë°›ìŒ
```

---

## ğŸ’¡ í•µì‹¬ ì •ë¦¬

### ê°€ì¥ ì¤‘ìš”í•œ 5ê°€ì§€

1. **ìŠ¤íŠ¸ë¦¼ì€ ë‹¨ í•œ ë²ˆë§Œ ì†Œë¹„ ê°€ëŠ¥**
2. **ì¤‘ê°„ ì—°ì‚°ì€ ê²Œìœ¼ë¥´ë‹¤ (Lazy)**
3. **ì‡¼íŠ¸ì„œí‚·ìœ¼ë¡œ ì„±ëŠ¥ í–¥ìƒ**
4. **ë£¨í”„ í“¨ì „ìœ¼ë¡œ ìµœì í™”**
5. **ë³‘ë ¬ ìŠ¤íŠ¸ë¦¼ì€ ëŒ€ëŸ‰ ë°ì´í„°ì—ë§Œ**

### ì‹¤ìˆ˜ ë°©ì§€ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] ìŠ¤íŠ¸ë¦¼ ì¬ì‚¬ìš©í•˜ì§€ ì•Šì•˜ë‚˜?
- [ ] ìµœì¢… ì—°ì‚° ìˆë‚˜?
- [ ] peekì„ ìµœì¢… ì—°ì‚°ìœ¼ë¡œ ì“°ì§€ ì•Šì•˜ë‚˜?
- [ ] ì™¸ë¶€ ìƒíƒœ ë³€ê²½í•˜ì§€ ì•Šì•˜ë‚˜?
- [ ] ë³‘ë ¬ ìŠ¤íŠ¸ë¦¼ì„ ì ì ˆíˆ ì‚¬ìš©í–ˆë‚˜?

---

**ì‘ì„±ì¼:** 2024ë…„  
**ì£¼ì œ:** Java Stream Q&A  
**ë‚œì´ë„:** ì¤‘ê¸‰~ê³ ê¸‰
